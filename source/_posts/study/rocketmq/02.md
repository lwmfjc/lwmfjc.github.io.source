---
title: 双主双从集群搭建
description: 双主双从集群搭建
tags:
  - rocketmq-hm
categories:
  - 学习
date: 2023-04-06 10:55:23
updated: 2023-04-06 10:55:23
---

> 转载自https://github.com/Snailclimb/JavaGuide（添加小部分笔记）感谢作者!

# 服务器信息修改

在.135和.138均进行下面的操作

## 解压

rocketmq解压到/usr/local/rocketmq目录下

## host添加

```shell
#添加host
vim /etc/hosts
##添加内容
192.168.1.135 rocketmq-nameserver1
192.168.1.138 rocketmq-nameserver2
192.168.1.135 rocketmq-master1
192.168.1.135 rocketmq-slave2
192.168.1.138 rocketmq-master2
192.168.1.138 rocketmq-slave1
## 保存后
systemctl restart network
```

## 防火墙

### 直接关闭

```shell
## 防火墙关闭
systemctl stop firewalld.service
## 防火墙状态查看
firewall-cmd --state
##禁止开机启动
systemctl disable firewalld.service
```

### 或者直接关闭对应端口即可

![image-20230406122046779](https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230406122046779.png)

## 环境变量配置

为了执行rocketmq命令方便

```shell
#添加环境变量
vim etc/profile
#添加
ROCKETMQ_HOME=/usr/local/rocketmq/rocketmq-all-4.4.0-bin-release
PATH=$PATH:$ROCKETMQ_HOME/bin
export ROCKETMQ_HOME PATH
#使配置生效
source /etc/profile
```

## 消息存储路径创建 

```shell
mkdir /usr/local/rocketmq/store
mkdir /usr/local/rocketmq/store/commitlog
mkdir /usr/local/rocketmq/store/consumequeue
mkdir /usr/local/rocketmq/store/index
```



