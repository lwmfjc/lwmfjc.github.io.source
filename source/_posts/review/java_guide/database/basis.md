---
title: 数据库基础
description: 数据库基础
categories:
  - 学习
tags:
  - 复习
  - 复习-javaGuide
  - 复习-javaGuide-database
date: 2022-12-20 11:19:14
updated: 2023-01-10 13:19:14
---

> 转载自https://github.com/Snailclimb/JavaGuide（添加小部分笔记）感谢作者!

> 这部分内容由于涉及太多概念性内容，所以参考了维基百科和百度百科相应的介绍。

# 什么是数据库，数据库管理系统，数据库系统，数据库管理员

- **数据库**：数据库（**DataBase 简称DB**）就是**信息的集合**或者说**数据库管理系统管理的数据的集合**。
- **数据库管理系统**：数据库管理系统（**Database Management System 简称DBMS**）是一种**操纵和管理数据库**的大型软件，通常用于建立、使用和维护 **数据库**。
- **数据库系统（范围最大）**：数据库系统（Data Base System，简称DBS）通常由**软件、数据和数据管理员（DBA）**组成。
- **数据库管理员**：数据库管理员（Database Adminitrator，简称DBA）负责全面**管理和控制**数据库系统 **(是一个人)**

**数据库系统基本构成**如下图所示  
![image-20230110143032664](https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230110143032664.png)

# 什么是元组，码，候选码，主码，外码，主属性，非主属性

- **元组**：元组（tuple）是**关系数据库**中的**基本概念**，**关系**是一张表，表中的**每行**（即数据库中的每条**记录**）就是一个元组，每列就是一个属性。在**二维表**里，元组也成为**行**
- **码**：码就是能**唯一标识实体**的属性，对应表中的**列**
- **候选码**：若关系中的**某一属性**或**属性组的值**能**唯一的标识一个元组**，而**其任何、子集都不能再标识**，则称该**属性组**为**候选码**。例如：在学生实体中，**“学号”**是能唯一的区分学生实体的，同时又假设**“姓名”、“班级”的属性组合**足以区分学生实体，那么**{学号}**和**{姓名，班级}**都是**候选码**。
- **主码**：主码也叫**主键**，主码是**从候选码**中选出来的。一个实体集中只能有**一个主码**，但可以有**多个候选码**
- **外码**：外码也叫**外键**。如果**一个关系中的一个属性**是**另外一个关系中的主码**则这个属性为外码。
- **主属性** ： **候选码中出现过的属性**称为主属性(**这里强调单个**）。比如关系 工人（工号，身份证号，姓名，性别，部门）. 显然**工号和身份证号**都能够唯一标示这个关系，所以都是候选码。**工号、身份证号这两个属性就是主属性**。如果主码是一个属性组，那么属性组中的属性都是主属性。
- **非主属性：** **不包含在任何一个候选码中的属性**称为非主属性。比如在关系——学生（学号，姓名，年龄，性别，班级）中，主码是“学号”，那么其他的“姓名”、“年龄”、“性别”、“班级”就都可以称为非主属性。

# 主键和外键有什么区别

- **主键(主码)** ：主键用于**唯一标识一个元组**，不能有重复，不允许为空。一个表只能有一个主键。
- **外键(外码)** ：外键用来和其他表建立联系用，**外键是另一表的主键**，外键是可以有重复的，可以是空值。一个表可以有多个外键

# 为什么不推荐使用外键与级联

- 对于外键和级联，阿里巴巴开发手册这样说道

  > 【强制】不得使用外键与级联，一切**外键概念**必须在应用层解决。
  >
  > 说明: 以学生和成绩的关系为例，学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，即为级联更新。
  >
  > 缺点： **外键与级联更新适用于单机低并发，不适合分布式、高并发集群; 级联更新是强阻塞，存在数据库更新风暴的风 险; 外键影响数据库的插入速度**

- 为什么不要使用外键

  1. 增加了复杂性

     > a. 每次做DELETE 或者UPDATE都必须考虑外键约束，会导致开发的时候很痛苦, **测试数据极为不方便**; b. 外键的主从关系是定的，假如那天需求有变化，**数据库中的这个字段根本不需要和其他表有关联的话就会增加很多麻烦**。

  2. 增加了额外操作

     > 数据库需要增加维护外键的工作，比如当我们做一些涉及外键字段的增，删，更新操作之后，需要触发相关操作去检查，保证数据的的一致性和正确性，这样会不得不消耗资源；（**个人觉得这个不是不用外键的原因**，因为即使你不使用外键，你在应用层面也还是要保证的。所以，我觉得这个影响可以忽略不计。）

  3. 对分库分表很不友好：因为分库分表下外键无法生效

  4. ...

- 外键的一些好处

  1. 保证了**数据库数据的一致性和完整性**；
  2. 级联操作方便，**减轻了程序代码量**；
  3. ......

  **如果系统不涉及分库分表**，**并发量不是很高**的情况还是可以考虑使用外键的

# 什么是ER图

> 做一个项目的时候一定要试着**画 ER 图来捋清数据库设计**，这个也是面试官问你项目的时候经常会被问道的。

- E-R图，也称 **实体-联系图（Entity Relationship Diagram）**，提供表示**实体类型**、**属性**和**关系**，用来描述现实世界的**概念模型**。它是描述**现实世界关系概念模型**的有效方法，是**表示概念关系模型**的一种方式
- 下图是一个学生选课的 ER 图，**每个学生可以选若干门课程**，**同一门课程也可以被若干人选择**，所以它们之间的关系是**多对多（M: N）**。另外，还有**其他两种关系**是：**1 对 1（1:1）**、**1 对多（1: N）**
  ![image-20230110151637953](https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230110151637953.png)
  将**ER图**转换成**数据库实际的关系模型**（实际设计中，我们通常会将任课教师也作为一个实体来处理）  
  ![image-20230110151807973](https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230110151807973.png)

# 数据库范式了解吗



# 什么是存储过程

# drop、delete与truncate区别

## 用法不同

## 属于不同的数据库语言

## 执行速度不同

# 数据库设计通常分为哪几步

