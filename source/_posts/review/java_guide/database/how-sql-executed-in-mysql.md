---
title: SQL语句在MySQL中的执行过程
description: SQL语句在MySQL中的执行过程
categories:
  - 学习
tags:
  - 复习
  - 复习-javaGuide
  - 复习-javaGuide-database
date: 2023-01-19 10:20:57
updated: 2023-01-19 10:20:57
---

> 转载自https://github.com/Snailclimb/JavaGuide（添加小部分笔记）感谢作者!
>
> 原文 https://github.com/kinglaw1204 感谢作者

- 本篇文章会分析**一个SQL语句**在MySQL的**执行流程**，包括**SQL的查询**在MySQL内部会怎么**流转**，**SQL语句的更新**是怎么完成的
- 分析之前先看看**MySQL的基础架构**，知道了MySQL由**哪些组件**组成以及**这些组件的作用**是什么，可以帮助我们**理解**和**解决**这些问题

 # MySQL基础架构分析

## MySQL基本架构概览

- 下图是MySQL的简要架构图，从下图可以看到**用户的SQL语句**在MySQL内部是**如何执行的**
- 先简单介绍一个下图涉及的一些组件的基本作用
  ![image-20230119113638560](https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230119113638560.png)
  1. **连接器**： **身份认证**和**权限相关**（登录MySQL的时候）
  2. **查询缓存**：执行查询语句的时候，会**先查询缓存**（MySQL8.0版本后移除，因为这个功能不太实用）
  3. **分析器**：**没有命中**缓存的话，SQL语句就会经过分析器，分析器说白了就是要**先看**你的SQL语句干嘛，再**检查**你的SQL语句**语法**是否正确
  4. **优化器**：按照**MySQL认为最优的方案**去执行
  5. **执行器**：**执行语句**，然后从**存储引擎**返回数据
- 简单来说 MySQL 主要分为 Server 层和存储引擎层：
  - **Server 层**：主要包括**连接器**、**查询缓存**、**分析器**、**优化器**、**执行器**等，所有跨存储引擎的功能都在这一层实现，比如**存储过程**、**触发器**、**视图**，**函数**等，还有一个**通用的日志模块 binlog 日志模块**。
  - **存储引擎**： 主要负责数据的**存储**和**读取**，采用**可以替换的插件式架构**，支持 InnoDB、MyISAM、Memory 等多个存储引擎，其中 InnoDB 引擎有自有的日志模块 **redolog 模块**。**现在最常用的存储引擎是 InnoDB，它从 MySQL 5.5 版本开始就被当做默认存储引擎了**

## Server层基本组件介绍

# 语句分析

## 查询语句

## 更新语句

# 总结

